deoplete sources and nvim-go
deopleteã®ã‚½ãƒ¼ã‚¹ç´¹ä»‹ã¨Goã§vim-goã‚’ã‚¹ã‚¯ãƒ©ãƒƒãƒã—ãŸè©±
05 Nov 2016
Tags: neovim, deoplete, go, c, python, vim-go

zchee
-
zchee.io at gmail.com
https://github.com/zchee
@_zchee_

* Who?

.image vimconf2016/avatar.png 128 _
.caption zchee

- [[https://github.com/zchee][github/zchee]]
- [[https://twitter.com/_zchee_][twitter/_zchee_]]

ï¼‘å¹´å‰ã‹ã‚‰ (neo) vim ä½¿ã„å§‹ã‚ã¾ã—ãŸ

- (neo) vim
- Docker
- Go
- (ã¡ã‚‡ã£ã¨) Hypervisor

* ã‚¢ã‚¸ã‚§ãƒ³ãƒ€

* ã‚¢ã‚¸ã‚§ãƒ³ãƒ€

- deoplete sources ã®ç´¹ä»‹
- neovimå°‚ç”¨ã« vim-go ã‚’Goã§ã‚¹ã‚¯ãƒ©ãƒƒãƒã—ãŸ [[https://github.com/zchee/nvim-go][nvim-go]] ã®è©±

* deoplete sources

* deoplete sources

- [[https://github.com/Shougo/deoplete.nvim][deoplete.nvim]] ã¨ã¯
- deoplete.nvimã®ã‚½ãƒ¼ã‚¹ã¯ã©ã‚“ãªæ„Ÿã˜ãªã®ã‹
- *Python* : [[https://github.com/zchee/deoplete-jedi][deoplete-jedi]]
- *C* *family* : [[https://github.com/zchee/deoplete-clang][deoplete-clang]]
- *Go* : [[https://github.com/zchee/deoplete-go][deoplete-go]]

* deoplete.nvim ã¨ã¯

* deoplete.nvim ã¨ã¯

- [[https://github.com/Shougo/deoplete.nvim][Shougo/deoplete.nvim]]

ğŸŒ  Dark powered asynchronous completion framework for neovim

Shougoã•ã‚“ãŒå»å¹´ã®vimconfã§ç™ºè¡¨ã•ã‚ŒãŸã€Neovimã®ç‰¹æ€§ã‚’æœ€å¤§é™ç”Ÿã‹ã—ãŸ
éåŒæœŸè£œå®Œãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

ã‚³ã‚¢éƒ¨åˆ†ã¯Python3ã§å®Ÿè£…ã•ã‚Œã¦ã„ã¦ã€ã‚„ãŸã‚‰é€Ÿã„ã§ã™

* æ—¢ã«ã¿ãªã•ã¾ã¯ã”å­˜çŸ¥ã§ã—ã‚‡ã† ( æƒ³å®š )

* deoplete.nvimã®ã‚½ãƒ¼ã‚¹ã¯ã©ã‚“ãªæ„Ÿã˜ãªã®ã‹

* å®Ÿã¯ã¨ã‚Šã‚ãˆãšå‹•ã‹ã™ã ã‘ãªã‚‰éå¸¸ã«ç°¡å˜

* å®Ÿã¯ã¨ã‚Šã‚ãˆãšå‹•ã‹ã™ã ã‘ãªã‚‰éå¸¸ã«ç°¡å˜

- Python3 ã§æ›¸ã‘ã‚‹

- ã•ã™ãŒã®Pythonã€ãªã‚“ã§ã‚‚ã§ãã‚‹

- deopleteã®ãŸã‚ã«åˆã‚ã¦Pythonã‚’è§¦ã£ãŸã¼ãã§ã‚‚æ›¸ã‘ãŸã®ã§ã€ãªã‚“ã¨ã‹ãªã‚‹

- subprocess ã—ã‚ˆã†ãŒ threading ã—ã‚ˆã†ãŒã‚„ã‚ŠãŸã„æ”¾é¡Œ

- ã•ã‚‰ã«ã¯Numpyã¨ã‹TensorFlowã¨ã‹ã„ã„ã‚“ã˜ã‚ƒãªã„ã§ã™ã‹ã­ï¼ˆã‚ˆãã—ã‚‰ãªã„ï¼‰

* ä¾‹:

.code vimconf2016/go.py

ã“ã‚ŒãŒæœ€åˆæœŸã®Goç”¨ã®ã‚½ãƒ¼ã‚¹ã®ã™ã¹ã¦
ã¶ã£ã¡ã‚ƒã‘ã“ã‚Œã§ã‚‚å‹•ãã¾ã™

* ã¨ã‚Šã‚ãˆãšãƒã‚¤ãƒŠãƒªå©ãã‹RPCã™ã‚Œã°ãªã‚“ã¨ã‹ãªã‚‹

* ã‚‚ã— Python binding ãŒã‚ã‚Œã°ã‚‚ã†æ¥½å‹

* ãªæ™‚ã‚‚ã‚ã‚‹

* ã¤ãã£ãŸã‚½ãƒ¼ã‚¹ãŸã¡ã®ç´¹ä»‹

* ã¤ãã£ãŸã‚½ãƒ¼ã‚¹ãŸã¡ã®ç´¹ä»‹

é–‹ç™ºã—ã¦ã‚‹ã‚½ãƒ¼ã‚¹ãŸã¡ã‚’ã€ãƒ‡ãƒ¢ä¸­å¿ƒã«ç´¹ä»‹ã•ã›ã¦ãã ã•ã„

- *Python* : [[https://github.com/zchee/deoplete-jedi][deoplete-jedi]]
- *C* *family* : [[https://github.com/zchee/deoplete-clang][deoplete-clang]]
- *Go* : [[https://github.com/zchee/deoplete-go][deoplete-go]]

* deoplete-jedi

[[https://github.com/zchee/deoplete-jedi][zchee/deoplete-jedi]]

Pythonç”¨ã®è£œå®Œã‚¨ãƒ³ã‚¸ãƒ³jediã‚’ä½¿ã£ã¦ã€Pythonã§æ›¸ã„ãŸPythonã®ãŸã‚ã®ã‚½ãƒ¼ã‚¹

* deoplete-jedi demo

.iframe http://localhost:8001/ 700 1300

* deoplete-clang

[[https://github.com/zchee/deoplete-clang][zchee/deoplete-clang]]

LLVM libclang-pythonã®Python3ãƒãƒ¼ãƒˆã‚’ä½¿ã£ãŸã€C ç³»ã®ãŸã‚ã®ã‚½ãƒ¼ã‚¹

* deoplete-clang demo

.iframe http://localhost:8002/ 600 1000

* deoplete-go

[[https://github.com/zchee/deoplete-go][zchee/deoplete-go]]

gocodeã‚’subprocessã§å©ãã€Goç”¨ã®ã‚½ãƒ¼ã‚¹

* deoplete-go demo

.iframe http://localhost:8003/ 600 1000

* deoplete sources - ãŠã‚ã‚Šã«

- ã‚ã¨ã¯zsh, Dockerfileç”¨ãªã©ã„ãã¤ã‹ä½œã‚Šã¾ã—ãŸãŒã€ã‚„ã£ã¤ã‘ãªã®ã§ç´¹ä»‹ã—ã¾ã›ã‚“

- ã¨ã‚Šã‚ãˆãšã‚½ãƒ¼ã‚¹ã¯ç°¡å˜ã«ä½œã‚Œã‚‹ã®ã§ã€ã¾ã ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãªã„è¨€èªã®ã‚½ãƒ¼ã‚¹æ›¸ã„ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ

- ã˜ã¶ã‚“ã§æ›¸ã„ãŸã‚½ãƒ¼ã‚¹ã§é«˜é€Ÿã«è£œå®Œã§ããŸã‚Šã™ã‚‹ã¨ã€çµæ§‹å¬‰ã—ã„ã—ã‹ãªã‚Šæ¥½ã§ã™

* ã¤ã

* neovimå°‚ç”¨ã« vim-go ã‚’Goã§ã‚¹ã‚¯ãƒ©ãƒƒãƒã—ãŸ nvim-go ã®è©±

* nvim-go

- Go development plugin for Neovim
- ã©ã†ã‚„ã£ã¦Goã§Neovimã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã‘ã‚‹ã®ã‹
- ä»Šã®ã¨ã“ã‚ã®çŠ¶æ³
- demo

* Go development plugin for Neovim

* Go development plugin for Neovim

- vim scriptã§æ›¸ã‹ã‚ŒãŸvim-goã‚’ã€vimã¨Goã®å‹‰å¼·ã®ãŸã‚ã«Goã§æ›¸ãç›´ã—ãŸã‚‚ã®
- Neovimã®msgpack-rpcä¾å­˜ãªã®ã§ã€ã“ã¡ã‚‰ã‚‚Neovimå°‚ç”¨ã§ã™
- ãƒã‚¤ãƒŠãƒªå©ã‹ãªã„ã¨ã„ã‘ãªã„ã¨ã“(astã¨ã‹)ã‚’ã€ã˜ã¶ã‚“ã§ãƒ‘ãƒ¼ã‚¹ã—ã¦ãã®ã¾ã¾å‡ºåŠ›ã§ãã‚‹ã®ã§æ‹¡å¼µã™ã‚‹ã®æ¥½ã—ã„ã§ã™
- ã„ã¾ã®ã¨ã“ã‚ã¯ã€ã¨ã‚Šã‚ãˆãšvim-goã‚³ãƒ³ãƒ‘ãƒã«ã™ã‚‹ã‚ˆã†ã«ãŒã‚“ã°ã£ã¦ã¾ã™
- Delve debugger interface : )

* ã©ã†ã‚„ã£ã¦Goã§Neovimã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã‘ã‚‹ã®ã‹

* ã©ã†ã‚„ã£ã¦Goã§Neovimã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã‘ã‚‹ã®ã‹

[[https://github.com/neovim/go-client][neovim/go-client]]

gorillaç³»ã‚„redigoã€godoc.orgã®å…ƒã‚’æ›¸ã„ãŸ(?) [[https://github.com/garyburd][@garyburd]] æ°è¬¹è£½

ç‹¬è‡ªå®Ÿè£…ã®msgpackãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½¿ã£ã¦ã€Neovimã¨é€šä¿¡ã—ã¾ã™

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸãƒã‚¤ãƒŠãƒªãŒãƒ‡ãƒ¼ãƒ¢ãƒ³ã¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨Neovimã®ã‚ã„ã ã«ã„ã¦ã€å‘½ä»¤ã‚’ä¸­ç¶™ã—ã¦ãã‚Œã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸

Goã®åˆ©ç‚¹ã®ã²ã¨ã¤ã€goroutineã‚’ä½¿ãˆã‚‹ã®ã§ã€ãŒã‚“ãŒã‚“éåŒæœŸã§å‹•ãã¾ã™

* ã©ã†ã‚„ã£ã¦Goã§Neovimã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã‘ã‚‹ã®ã‹

[[https://github.com/neovim/go-client][neovim/go-client]] READMEæŠœç²‹

hello.go

.code vimconf2016/client.go

* ã©ã†ã‚„ã£ã¦Goã§Neovimã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã‘ã‚‹ã®ã‹

[[https://github.com/neovim/go-client][neovim/go-client]] READMEæŠœç²‹

plugin/hello.vim

.code vimconf2016/client.vim

* Helloã—ãŸã‹ã£ãŸã‘ã©å‹•ã‹ãªã„ã®ã§ã‚ã¨ã§PRã—ã¾ã™

* nvim-goã®ä»Šã®ã¨ã“ã‚ã®çŠ¶æ³

* nvim-goã®ä»Šã®ã¨ã“ã‚ã®çŠ¶æ³

.link https://github.com/zchee/nvim-go/blob/master/TODO.md#command-diff-list github.com/zchee/nvim-go/TODO.md

* nvim-go demo

* ã‚¹ãƒ©ã‚¤ãƒ‰ã«ã¤ã„ã¦

ãªãŠã€ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã¯
[[http://go-talks.appspot.com/github.com/zchee/talks/vimconf2016.slide][go-talks.appspot.com/github.com/zchee/talks/vimconf2016.slide]]

ã‚ã‚‹ã„ã¯

	go get -u golang.org/x/tools/cmd/present
	go get -u -d github.com/zchee/talks
	cd $GOPATH/src/github.com/zchee/talks
	present

ã§ [[http://localhost:3999/vimconf2016.slide][http://localhost:3999/vimconf2016.slide]] ã«ã¦ã”è¦§ã„ã ã ã‘ã¾ã™

* ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ
